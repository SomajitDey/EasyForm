<!DOCTYPE html>
<html lang="en">
    <head>
        <title>EasyForm</title>
        <meta name="description" content="Free, self-hosted, open-source form backend solution. No installation required for hosting. Lightweight server runs in browser. Backend sends form data as a Telegram bot to your Telegram account.">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
        <link rel="icon" type="image/x-icon" href="favicon.ico">
        <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
        <link rel="manifest" href="site.webmanifest">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="themes/prism.css">
    </head>
    <body>
        <div class="container-fluid p-5 text-bg-primary text-center">
            <h1>Welcome to EasyForm</h1>
        </div>
        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-2 text-bg-secondary text-center pt-5">
                    <div class="sticky-top">
                        <h3>Menu</h3>
                        <div class="d-flex flex-column justify-content-center align-items-center mt-2 mb-3 pb-3">
                            <button type="button" class="btn btn-primary mt-5" onclick="spaGoTo('about');">About</button>
                            <button type="button" class="btn btn-primary mt-4" onclick="spaGoTo('server');">Server</button>
                            <button type="button" class="btn btn-primary mt-4" onclick="spaGoTo('inbox'); updateUnreadCount();">Inbox <span id ="unread" class="badge bg-danger">0</span></button>
                            <a href="https://github.com/somajitdey/easyform" class="btn btn-primary mt-4">Source</a>
                            <a href="https://buymeacoffee.com/SomajitDey" class="btn btn-primary mt-4">Donate</a>
                            <a href="https://github.com/SomajitDey/EasyForm/discussions/1" class="btn btn-primary mt-4">Contact</a>
                        </div>
                        <p>Copyright &copy; 2024 Somajit Dey</p>
                    </div>
                </div>
                <div class="col-sm-10 bg-light pt-5 pb-4">
                    <div class="text-bg-light">
                        <div class="badge bg-warning position-fixed bottom-0 end-0">
                            Server: <span id="serverStatus">None yet</span>
                        </div>


                            <p class="alert alert-danger spa-js">You don't have JavaScript enabled! This page cannot function without it.</p>

                        <div class="spa-page" id="about">
                            <section>
                                <h3>About</h3>
                                <p>EasyForm gives you a free and easy, self-hosted form backend solution for adding (contact) forms to your static website(s). You don't, however, need
                                    to configure any server or install anything. Your browser becomes your server!
                                </p>
                                <p>Your smartphone or PC is perhaps always connected to the internet, even on the move. So, if you keep your browser open there, and a very 
                                    light-weight JavaScript server runs in it, you are essentially "self-hosting" for free. EasyForm capitalizes on this. Also, the ability to run in a
                                    browser makes EasyForm platform-independent!
                                </p>
                                Working with EasyForm is dead simple. All you need to do is the following:
                                <ul>
                                    <li>Create a Telegram Bot and store its API token. This is easy. Just open a chat with <a href="https://t.me/botfather">@BotFather</a> in Telegram
                                        and send: /newbot
                                    </li>
                                    <li>Follow instructions in the <b>Config:</b> section below. You will be required to choose a Form Action URL there</li>
                                    <li>Use your chosen Form Action URL in your (contact) form</li>
                                </ul>
                                Whenever your users submit the form, you will get a Telegram text containing the users' form data from the Telegram Bot you created.
                                <p>Here is an HTML code snippet you can readily embed as a basic contact form in your website. Just replace FormActionURL with the actual URL.</p>
                                <pre><code class="language-html">
&lt;form action=&quot;FormActionURL&quot; method=&quot;POST&quot; target=&quot;hidden_iframe&quot; autocomplete=&quot;on&quot;&gt;
    &lt;input type=&quot;hidden&quot; name=&quot;From&quot; value=&quot;sample&quot;&gt;
    &lt;input type=&quot;email&quot; name=&quot;Email&quot; placeholder=&quot;Your Email&quot;&gt;
    &lt;input type=&quot;text&quot; name=&quot;Name&quot; placeholder=&quot;Your Name&quot;&gt;
    &lt;input type=&quot;text&quot; name=&quot;Message&quot; placeholder=&quot;Your Message&quot; autocomplete=&quot;off&quot;&gt;
    &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;
    &lt;input type=&quot;reset&quot; value=&quot;Reset&quot;&gt;
&lt;/form&gt;
&lt;!-- when the form is submitted, the server response will appear in this iframe, hidden from view --&gt;
&lt;iframe name=&quot;hidden_iframe&quot; src=&quot;about:blank&quot; hidden&gt;&lt;/iframe&gt;
</code></pre>
                                <strong>Tips:</strong>
                                <ul>
                                    <li>Securely store your Bot API token and Form Action URL for future reference.</li>
                                    <li>For reproducibility upon page reload/refresh, reuse the previous values, often suggested by the browser, during config.</li>
                                </ul>
                                <h3>Powered by</h3>
                                <ul class="nav nav-pills nav-justified">
                                    <li class="nav-item"><a class="nav-link" href="https://github.com/nwtgck/piping-server">piping-server</a></li>
                                    <li class="nav-item"><a class="nav-link" href="https://httprelay.io/">http-relay</a></li>
                                    <li class="nav-item"><a class="nav-link" href="https://core.telegram.org/bots/api">Telegram Bot</a></li>
                                    <li class="nav-item"><a class="nav-link" href="https://prismjs.com/">prism.css</a></li>
                                    <li class="nav-item"><a class="nav-link" href="https://getbootstrap.com/">bootstrap.css</a></li>
                                    <li class="nav-item"><a class="nav-link" href="https://www.freeformatter.com/html-formatter.html">freeformatter.com</a></li>
                                    <li class="nav-item"><a class="nav-link" href="https://favicon.io/">favicon.io</a></li>
                                    <li class="nav-item"><a class="nav-link" href="https://github.com/twitter/twemoji/blob/master/assets/svg/1f5e8.svg">twemoji</a></li>
                                </ul>
                            </section>
                        </div>
                        <div class="spa-page" id="server">
                            <section>
                                <h3>Server</h3>
                                <div id="config">
                                <form onsubmit="startWorker(); return false;" autocomplete="on">
                                    <p>Setup in just 3 easy steps.</p>
                                    <label for="apiKey" class="form-label">1. Enter your Telegram Bot API Token (available from <a href="https://t.me/botfather">@BotFather</a>):</label>
                                    <input type="text" id="apiKey" class="form-control" required>
                                    <br>
                                    <p>2. Send any text to the Bot. Then, click Fetch Chat ID. Or, enter your chat ID if you know what you're doing :-)</p>
                                    <button onclick="fetchChatID();">Fetch Chat ID</button>
                                    <br><br>
                                    <p>3. Generate or enter your EasyForm API Key:</p>
                                    <button onclick="genUUID();">Generate API Key</button>
                                    <input type="text" id="uuid" size="8" placeholder="Enter API Key" required>
                                    <br><br>
                                    <button type="submit" class="btn btn-success">Use the above to launch server</button>
                                </form>
                                </div>
                                <div id="testForm" style="display:none">
                                    <p>Test if everything is working properly with the following sample form. You should get a Telegram message upon clicking Post! Your posted data should also be logged below.</p>
                                    <form method="POST" target="hidden_iframe">
                                        <input type="hidden" name="From" value="tester">
                                        <div class="row mt-2">
                                            <div class="col">
                                                <input type="email" class="form-control" name="Email" placeholder="Your Email" autocomplete="on" required>
                                            </div>
                                            <div class="col">
                                                <input type="text" class="form-control" name="Name" placeholder="Your Name" autocomplete="on" required>
                                            </div>
                                            <input type="text" class="form-control mt-2" name="Message" placeholder="Your Message" required>
                                        </div>
                                        <button type="submit" id="testFormBtn" class="btn btn-info mt-2" onclick="alert('Thanks for your message!');">Post</button>
                                        <button type="reset" class="btn btn-warning mt-2">Reset</button>
                                    </form>
                                    <iframe name="hidden_iframe" src="about:blank" hidden></iframe>
                                </div>
                                <br><br>
                                <h3>Log</h3>
                                <div id="logs" class="text-bg-info">
                                    <p>Server logs will be shown here</p>
                                </div>
                                <br><br>
                                <input type="button" id="toggleServer" value="Kill Server" disabled=true; onclick="toggleWorker();">
                                <button onclick="spaTop();">Top</button>
                            </section>
                        </div>
                        <div class="spa-page" id="inbox">
                        <section>
                            <h3>Inbox</h3>
                            <p class="alert alert-success">This is your storageless Inbox. All data is lost once you close this Tab.</p>
                            <div class="table-responsive">
                            <table class="table table-hover table-striped">
                                <thead class="table-dark">
                                    <tr id="inboxHeader">
                                        <th>From</th>
                                        <th>Email</th>
                                        <th>Name</th>
                                        <th>Message</th>
                                        <th>Time</th>
                                    </tr>
                                </thead>
                                <tbody id="inboxTable">
                                </tbody>
                            </table>
                            </div>
                        </section>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script src="app/spa.js"></script>
        <script src="themes/prism.js"></script>
        <script src="app/server.js"></script>
    </body>
</html>
